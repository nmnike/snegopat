<html><head>
                <link rel="stylesheet" href="../www/md.css" type="text/css"/>
                <title>Работа с метаданными</title></head><body><h2 id="работа-с-метаданными">Работа с метаданными</h2><a name="работа-с-метаданными"></a>
<blockquote>
<p>портировано</p>
</blockquote>
<p>Для работы с метаданными в режиме предприятия есть объект Метаданные. Он также работает
и в режиме конфигуратора, но только с метаданными ИБ. Кроме того, возможности штатного
объекта ограниченны и не предоставляют всей полноты информации о метаданных.
Поэтому в SnegAPI сделана своя модель работы с метаданными.</p>
<p>Что же из себя они представляют?<br>Вкратце метаданные - это дерево из <strong>объектов</strong> метаданных.
Каждый объект относится к определенному <strong>классу</strong> метаданных, имеет набор собственных <strong>свойств</strong>,
а также несколько видов дочерних объектов.</p>
<p>Класс объекта метаданных задает, какие виды свойств имеет этот объект и какие виды дочерних объектов.
Например, возьмем объект метаданных какого-либо справочника. Он относится к классу <code>Справочники</code>.
Данный класс указывает, что у справочника имееются такие-то свойства (<code>Иерархический</code>, <code>ДлинаКода</code>,
<code>МодульОбъекта</code> и т.п.), и следующие виды дочерних объектов: <code>Реквизиты</code>, <code>ТабличныеЧасти</code>, <code>Формы</code>,
<code>Команды</code>, <code>Макеты</code>. Конкретные значения свойств и состав дочерних объектов задаются уже в
каждом конкретном объекте метаданных.</p>
<p>У каждого объекта метаданных имеется уникальный идентификатор (guid), а также набор свойств.
Свойства - это то, мы видим в окне свойств, активировав объект в дереве метаданных.
Обратите внимание, что непосредственно сами модули, формы, макеты - это тоже свойства объекта
метаданных, а не дочерние объекты.
Каждый класс метаданных и каждый вид свойств также имеет свой собственный уникальный
идентификатор (guid).</p>
<p>Сами метаданные организованы в контейнер метаданных. Он задает корневой объект, систему типов,
порожденных этими метаданными, название контейнера и т.д. Если сравнивать с v77, то там был
только один, глобальный контейнер метаданных, то есть по сути, было только одно дерево.
В 8ке это не так. Имеется контейнер с метаданными конфигурации базы данных, метаданными
основной конфигурации, каждая внешняя обработка/отчет и каждый открываемый cf-файл 
имеют свое дерево метаданных.<br>SnegAPI содержит методы, позволяющие перебрать все доступные в данный момент контейнеры
метаданных. Каждый контейнер может быть подчинен другому, master контейнеру. Обычно это
внешние отчеты/обработки, их метаданные подчинены основным метаданным.</p>
<p>Для каждого объекта метаданных можно получить его &quot;внутреннее&quot; представление, то есть
те данные, в виде которых 1С хранит этот объект метаданных. Это &quot;штатный&quot; 1Совский список
с фигурными скобочками. Если внимательно присмотреться к этим данным, то видно, что
часть свойств объекта хранится непосредственно в них (обычно это свойства из простых
значений - строка, число, перечисление и т.п.), а часть свойств отсутствует, и хранится
в контейнере метаданных отдельно, в виде отдельного файла. Это обычно сложные свойства,
вроде модулей, макетов, форм. Поэтому свойства разделяются на <strong>&quot;внутренние&quot;</strong> и
<strong>&quot;внешние&quot;</strong>. Внутренние можно получить как одно значение, внешние получить в виде
файла, либо открывать для редактирования.</p>
<p>Корнем доступа ко всем метаданным является свойство <a href="../help\docs_snegapi.md27.html#metadata">Designer.metadata</a>, имеющее
тип <a href="../help\docs_snegapi.md70.html#IV8MetaData">IV8MetaData</a>. Через него можно перебрать все метаданные, открытые в
конфигураторе.</p>
<hr>
<p><a name="IV8MetaData"></a></p>
</body>